---
alwaysApply: true
---

## 데이터베이스 덤프 (시드 데이터)

### ✅ 올바른 방법 (로컬)
```bash
npx supabase db dump --local --data-only -f supabase/seed.sql
```

### ❌ 잘못된 방법 (원격/프로덕션)
```bash
npx supabase db dump --data-only -f supabase/seed.sql
```

### 마이그레이션 파일 압축
```bash
npx supabase migration squash
```

### 로컬대시보드 변경사항 마이그레이션 적용
```bash
npx supabase db diff -f <migration_name>
```

### 스키마 변경 마이그레이션 추가
```bash
# 현재 DB와 마이그레이션 파일 차이점 확인 후 새 마이그레이션 생성
npx supabase db diff --local --schema public -f supabase/migrations/YYYYMMDDHHMMSS_description.sql
```

**중요:**
- `--local` 플래그가 없으면 기본적으로 원격(프로덕션) DB에서 덤프를 가져옵니다
- 로컬 개발 환경과 프로덕션 환경은 데이터 구조가 다를 수 있습니다
- `seed.sql`은 로컬 개발용 테스트 데이터여야 합니다
- 원격 DB에서 덤프를 가져오면 로컬 환경과 맞지 않아 리셋이 실패할 수 있습니다
