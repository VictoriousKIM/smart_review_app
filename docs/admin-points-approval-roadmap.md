# ê´€ë¦¬ì í¬ì¸íŠ¸ ìŠ¹ì¸/ê±°ì ˆ ê¸°ëŠ¥ ê°œë°œ ë¡œë“œë§µ

## ğŸ“‹ ê°œìš”
ê´€ë¦¬ìê°€ ì‚¬ì—…ìì™€ ë¦¬ë·°ì–´ì˜ í¬ì¸íŠ¸ ì…ê¸ˆ/ì¶œê¸ˆ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê±°ë‚˜ ê±°ì ˆí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

## ğŸ¯ ëª©í‘œ
- `/mypage/admin/points` í˜ì´ì§€ì—ì„œ ëŒ€ê¸°ì¤‘ì¸ ê±°ë˜ ëª©ë¡ ì¡°íšŒ
- ì‚¬ì—…ì/ë¦¬ë·°ì–´ êµ¬ë¶„í•˜ì—¬ í‘œì‹œ
- ì…ê¸ˆ/ì¶œê¸ˆ êµ¬ë¶„í•˜ì—¬ í‘œì‹œ
- ìŠ¹ì¸/ê±°ì ˆ ê¸°ëŠ¥ êµ¬í˜„
- ê±°ì ˆ ì‚¬ìœ  ì…ë ¥ ê¸°ëŠ¥
- ì‹¤ì‹œê°„ ìƒíƒœ ì—…ë°ì´íŠ¸

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„

### âœ… ì´ë¯¸ êµ¬í˜„ëœ ê¸°ëŠ¥
1. **ë°ì´í„°ë² ì´ìŠ¤**
   - `cash_transactions` í…Œì´ë¸” ì¡´ì¬
   - `status`: `pending`, `approved`, `rejected`, `completed`, `cancelled`
   - `approved_by`, `rejected_by`, `rejection_reason` í•„ë“œ ì¡´ì¬
   - `update_cash_transaction_status` RPC í•¨ìˆ˜ ì¡´ì¬

2. **ì„œë¹„ìŠ¤ ë ˆì´ì–´**
   - `WalletService.updatePointCashTransactionStatus()` ë©”ì„œë“œ ì¡´ì¬

3. **UI**
   - `admin_points_screen.dart` ê¸°ë³¸ êµ¬ì¡° ì¡´ì¬ (í˜„ì¬ëŠ” ì§€ê°‘ ëª©ë¡ë§Œ í‘œì‹œ)

### âŒ êµ¬í˜„ í•„ìš”í•œ ê¸°ëŠ¥
1. ëŒ€ê¸°ì¤‘ì¸ ê±°ë˜ ëª©ë¡ ì¡°íšŒ RPC í•¨ìˆ˜
2. ê±°ë˜ ëª©ë¡ UI (ì‚¬ì—…ì/ë¦¬ë·°ì–´ êµ¬ë¶„, ì…ê¸ˆ/ì¶œê¸ˆ êµ¬ë¶„)
3. ìŠ¹ì¸/ê±°ì ˆ ë‹¤ì´ì–¼ë¡œê·¸
4. ê±°ì ˆ ì‚¬ìœ  ì…ë ¥ UI
5. í•„í„°ë§ ê¸°ëŠ¥ (ìƒíƒœ, íƒ€ì…, ì‚¬ìš©ì íƒ€ì…)
6. ì‹¤ì‹œê°„ ìƒˆë¡œê³ ì¹¨

---

## ğŸ—ºï¸ ê°œë°œ ë‹¨ê³„

### Phase 1: ë°ì´í„°ë² ì´ìŠ¤ RPC í•¨ìˆ˜ êµ¬í˜„
**ëª©í‘œ**: ê´€ë¦¬ìê°€ ëŒ€ê¸°ì¤‘ì¸ ê±°ë˜ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” RPC í•¨ìˆ˜ ìƒì„±

#### 1.1 `get_pending_cash_transactions` RPC í•¨ìˆ˜ ìƒì„±
```sql
-- ê´€ë¦¬ììš©: ëŒ€ê¸°ì¤‘ì¸ í˜„ê¸ˆ ê±°ë˜ ëª©ë¡ ì¡°íšŒ
CREATE FUNCTION get_pending_cash_transactions(
    p_status text DEFAULT 'pending',
    p_transaction_type text DEFAULT NULL, -- 'deposit' or 'withdraw'
    p_user_type text DEFAULT NULL, -- 'advertiser' or 'reviewer'
    p_limit integer DEFAULT 50,
    p_offset integer DEFAULT 0
) RETURNS jsonb
```

**ë°˜í™˜ ë°ì´í„° êµ¬ì¡°**:
- ê±°ë˜ ID, íƒ€ì…, ê¸ˆì•¡, ìƒíƒœ
- ì§€ê°‘ ì •ë³´ (user_id, company_id)
- ì‚¬ìš©ì ì •ë³´ (ì´ë¦„, ì´ë©”ì¼)
- íšŒì‚¬ ì •ë³´ (íšŒì‚¬ëª…, ì‚¬ì—…ì ë²ˆí˜¸)
- ê³„ì¢Œ ì •ë³´ (ì€í–‰, ê³„ì¢Œë²ˆí˜¸, ì˜ˆê¸ˆì£¼)
- ìƒì„± ì¼ì‹œ, ì„¤ëª…

**í•„í„°ë§ ì˜µì…˜**:
- ìƒíƒœë³„: `pending`, `approved`, `rejected`
- ê±°ë˜ íƒ€ì…ë³„: `deposit`, `withdraw`
- ì‚¬ìš©ì íƒ€ì…ë³„: `advertiser` (company_id ìˆìŒ), `reviewer` (company_id ì—†ìŒ)

#### 1.2 ê¶Œí•œ í™•ì¸
- ê´€ë¦¬ì(`user_type = 'admin'`)ë§Œ ì¡°íšŒ ê°€ëŠ¥
- `auth.uid()`ë¡œ í˜„ì¬ ì‚¬ìš©ì í™•ì¸

---

### Phase 2: Flutter ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„
**ëª©í‘œ**: RPC í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ì„œë¹„ìŠ¤ ë©”ì„œë“œ ì¶”ê°€

#### 2.1 `WalletService`ì— ë©”ì„œë“œ ì¶”ê°€
```dart
// ëŒ€ê¸°ì¤‘ì¸ ê±°ë˜ ëª©ë¡ ì¡°íšŒ
static Future<List<Map<String, dynamic>>> getPendingCashTransactions({
  String? status, // 'pending', 'approved', 'rejected'
  String? transactionType, // 'deposit', 'withdraw'
  String? userType, // 'advertiser', 'reviewer'
  int limit = 50,
  int offset = 0,
}) async

// ê±°ë˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ (ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸ í•„ìš”)
static Future<Map<String, dynamic>?> getCashTransactionDetail(String transactionId) async
```

#### 2.2 ëª¨ë¸ í´ë˜ìŠ¤ (ì„ íƒì‚¬í•­)
- `PendingCashTransaction` ëª¨ë¸ í´ë˜ìŠ¤ ìƒì„±
- ë˜ëŠ” `Map<String, dynamic>` ì‚¬ìš©

---

### Phase 3: UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
**ëª©í‘œ**: ê´€ë¦¬ì í¬ì¸íŠ¸ ê´€ë¦¬ í™”ë©´ ì¬êµ¬ì„±

#### 3.1 `AdminPointsScreen` ì¬êµ¬ì„±
**ë ˆì´ì•„ì›ƒ êµ¬ì¡°**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [í•„í„°] [ìƒˆë¡œê³ ì¹¨]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [íƒ­: ì „ì²´ | ëŒ€ê¸°ì¤‘ | ìŠ¹ì¸ë¨ | ê±°ì ˆë¨] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì‚¬ì—…ì ì…ê¸ˆ]                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ê±°ë˜ ì •ë³´ ì¹´ë“œ              â”‚   â”‚
â”‚  â”‚ [ìŠ¹ì¸] [ê±°ì ˆ] [ìƒì„¸ë³´ê¸°]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  [ë¦¬ë·°ì–´ ì¶œê¸ˆ]                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ê±°ë˜ ì •ë³´ ì¹´ë“œ              â”‚   â”‚
â”‚  â”‚ [ìŠ¹ì¸] [ê±°ì ˆ] [ìƒì„¸ë³´ê¸°]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì£¼ìš” ê¸°ëŠ¥**:
1. **í•„í„°ë§**
   - ìƒíƒœ í•„í„°: ì „ì²´, ëŒ€ê¸°ì¤‘, ìŠ¹ì¸ë¨, ê±°ì ˆë¨
   - íƒ€ì… í•„í„°: ì „ì²´, ì…ê¸ˆ, ì¶œê¸ˆ
   - ì‚¬ìš©ì íƒ€ì… í•„í„°: ì „ì²´, ì‚¬ì—…ì, ë¦¬ë·°ì–´

2. **ê±°ë˜ ì¹´ë“œ**
   - ì‚¬ìš©ì íƒ€ì… ë°°ì§€ (ì‚¬ì—…ì/ë¦¬ë·°ì–´)
   - ê±°ë˜ íƒ€ì… ë°°ì§€ (ì…ê¸ˆ/ì¶œê¸ˆ)
   - ìƒíƒœ ë°°ì§€ (ëŒ€ê¸°ì¤‘/ìŠ¹ì¸ë¨/ê±°ì ˆë¨)
   - ê¸ˆì•¡, ê³„ì¢Œ ì •ë³´, ìƒì„± ì¼ì‹œ
   - ìŠ¹ì¸/ê±°ì ˆ ë²„íŠ¼ (ëŒ€ê¸°ì¤‘ì¸ ê²½ìš°ë§Œ)
   - ìƒì„¸ë³´ê¸° ë²„íŠ¼

3. **ì •ë ¬**
   - ê¸°ë³¸: ìƒì„± ì¼ì‹œ ë‚´ë¦¼ì°¨ìˆœ (ìµœì‹ ìˆœ)
   - ì˜µì…˜: ê¸ˆì•¡ìˆœ, ìƒíƒœìˆœ

#### 3.2 ê±°ë˜ ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸/ìŠ¤í¬ë¦°
**í‘œì‹œ ì •ë³´**:
- ê±°ë˜ ê¸°ë³¸ ì •ë³´ (ID, íƒ€ì…, ê¸ˆì•¡, ìƒíƒœ)
- ì‚¬ìš©ì ì •ë³´ (ì´ë¦„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸)
- íšŒì‚¬ ì •ë³´ (ì‚¬ì—…ìë§Œ: íšŒì‚¬ëª…, ì‚¬ì—…ìë²ˆí˜¸)
- ê³„ì¢Œ ì •ë³´ (ì€í–‰, ê³„ì¢Œë²ˆí˜¸, ì˜ˆê¸ˆì£¼)
- ê±°ë˜ ì´ë ¥ (ìƒì„±, ìŠ¹ì¸/ê±°ì ˆ, ì™„ë£Œ ì¼ì‹œ)
- ê±°ì ˆ ì‚¬ìœ  (ê±°ì ˆëœ ê²½ìš°)

**ì•¡ì…˜ ë²„íŠ¼**:
- ìŠ¹ì¸ ë²„íŠ¼ (ëŒ€ê¸°ì¤‘ì¸ ê²½ìš°)
- ê±°ì ˆ ë²„íŠ¼ (ëŒ€ê¸°ì¤‘ì¸ ê²½ìš°)
- ë‹«ê¸° ë²„íŠ¼

#### 3.3 ìŠ¹ì¸ ë‹¤ì´ì–¼ë¡œê·¸
**í™•ì¸ ë©”ì‹œì§€**:
- "ì´ ê±°ë˜ë¥¼ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"
- ê±°ë˜ ì •ë³´ ìš”ì•½ í‘œì‹œ

**ì•¡ì…˜**:
- í™•ì¸ â†’ `updatePointCashTransactionStatus(status: 'approved')`
- ì·¨ì†Œ

#### 3.4 ê±°ì ˆ ë‹¤ì´ì–¼ë¡œê·¸
**ì…ë ¥ í•„ë“œ**:
- ê±°ì ˆ ì‚¬ìœ  (í•„ìˆ˜, í…ìŠ¤íŠ¸ ì…ë ¥)
- ê±°ë˜ ì •ë³´ ìš”ì•½ í‘œì‹œ

**ì•¡ì…˜**:
- í™•ì¸ â†’ `updatePointCashTransactionStatus(status: 'rejected', rejectionReason: ...)`
- ì·¨ì†Œ

---

### Phase 4: ìƒíƒœ ê´€ë¦¬ ë° ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
**ëª©í‘œ**: ìŠ¹ì¸/ê±°ì ˆ í›„ ëª©ë¡ ìë™ ìƒˆë¡œê³ ì¹¨

#### 4.1 ìƒíƒœ ê´€ë¦¬
- `_isLoading` ìƒíƒœ
- `_transactions` ë¦¬ìŠ¤íŠ¸
- `_selectedFilters` (ìƒíƒœ, íƒ€ì…, ì‚¬ìš©ì íƒ€ì…)

#### 4.2 ìƒˆë¡œê³ ì¹¨ ë¡œì§
- ìŠ¹ì¸/ê±°ì ˆ ì„±ê³µ ì‹œ `_loadTransactions()` í˜¸ì¶œ
- Pull-to-refresh ê¸°ëŠ¥ ì¶”ê°€
- ìë™ ìƒˆë¡œê³ ì¹¨ (ì„ íƒì‚¬í•­: 30ì´ˆë§ˆë‹¤)

---

### Phase 5: ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì í”¼ë“œë°±
**ëª©í‘œ**: ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ ë° í”¼ë“œë°±

#### 5.1 ì—ëŸ¬ ì²˜ë¦¬
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
- ê¶Œí•œ ì˜¤ë¥˜
- ì„œë²„ ì˜¤ë¥˜

#### 5.2 ì„±ê³µ í”¼ë“œë°±
- ìŠ¹ì¸ ì„±ê³µ: SnackBar "ê±°ë˜ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤"
- ê±°ì ˆ ì„±ê³µ: SnackBar "ê±°ë˜ê°€ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤"
- ë¡œë”© ì¸ë””ì¼€ì´í„°

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

### ìƒˆë¡œ ìƒì„±í•  íŒŒì¼
```
lib/
â”œâ”€â”€ screens/
â”‚   â””â”€â”€ mypage/
â”‚       â””â”€â”€ admin/
â”‚           â”œâ”€â”€ admin_points_screen.dart (ìˆ˜ì •)
â”‚           â””â”€â”€ widgets/
â”‚               â”œâ”€â”€ pending_transaction_card.dart (ì‹ ê·œ)
â”‚               â”œâ”€â”€ transaction_detail_dialog.dart (ì‹ ê·œ)
â”‚               â”œâ”€â”€ approve_dialog.dart (ì‹ ê·œ)
â”‚               â””â”€â”€ reject_dialog.dart (ì‹ ê·œ)
â”œâ”€â”€ services/
â”‚   â””â”€â”€ wallet_service.dart (ìˆ˜ì • - ë©”ì„œë“œ ì¶”ê°€)
â””â”€â”€ models/
    â””â”€â”€ pending_cash_transaction.dart (ì„ íƒì‚¬í•­)
```

### ìˆ˜ì •í•  íŒŒì¼
- `lib/screens/mypage/admin/admin_points_screen.dart` - ì „ì²´ ì¬êµ¬ì„±
- `lib/services/wallet_service.dart` - `getPendingCashTransactions()` ë©”ì„œë“œ ì¶”ê°€

### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- `supabase/migrations/YYYYMMDDHHMMSS_add_get_pending_cash_transactions.sql` (ì‹ ê·œ)

---

## ğŸ”„ ë°ì´í„° íë¦„

### ê±°ë˜ ëª©ë¡ ì¡°íšŒ
```
AdminPointsScreen
  â†“
WalletService.getPendingCashTransactions()
  â†“
Supabase RPC: get_pending_cash_transactions
  â†“
cash_transactions + wallets + users + companies JOIN
  â†“
JSONB ë°˜í™˜
  â†“
List<Map<String, dynamic>> ë³€í™˜
  â†“
UI í‘œì‹œ
```

### ìŠ¹ì¸/ê±°ì ˆ ì²˜ë¦¬
```
ì‚¬ìš©ì í´ë¦­ (ìŠ¹ì¸/ê±°ì ˆ)
  â†“
ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ (ê±°ì ˆ ì‹œ ì‚¬ìœ  ì…ë ¥)
  â†“
WalletService.updatePointCashTransactionStatus()
  â†“
Supabase RPC: update_cash_transaction_status
  â†“
cash_transactions í…Œì´ë¸” ì—…ë°ì´íŠ¸
  â†“
íŠ¸ë¦¬ê±°: update_wallet_balance_on_cash_transaction (ìŠ¹ì¸ ì‹œ)
  â†“
íŠ¸ë¦¬ê±°: log_cash_transaction_change
  â†“
ì„±ê³µ ì‘ë‹µ
  â†“
ëª©ë¡ ìƒˆë¡œê³ ì¹¨
```

---

## ğŸ¨ UI/UX ê°€ì´ë“œë¼ì¸

### ìƒ‰ìƒ
- **ëŒ€ê¸°ì¤‘**: ì£¼í™©ìƒ‰ (`Colors.orange`)
- **ìŠ¹ì¸ë¨**: íŒŒë€ìƒ‰ (`Colors.blue`)
- **ê±°ì ˆë¨**: ë¹¨ê°„ìƒ‰ (`Colors.red`)
- **ì™„ë£Œë¨**: ì´ˆë¡ìƒ‰ (`Colors.green`)

### ì•„ì´ì½˜
- **ì…ê¸ˆ**: `Icons.add_circle` (ì´ˆë¡ìƒ‰)
- **ì¶œê¸ˆ**: `Icons.remove_circle` (ë¹¨ê°„ìƒ‰)
- **ì‚¬ì—…ì**: `Icons.business`
- **ë¦¬ë·°ì–´**: `Icons.person`

### ë°°ì§€
- ì‚¬ìš©ì íƒ€ì…: `Chip` ìœ„ì ¯
- ê±°ë˜ íƒ€ì…: `Chip` ìœ„ì ¯
- ìƒíƒœ: `Container` with `BorderRadius`

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ë°ì´í„°ë² ì´ìŠ¤
- [ ] `get_pending_cash_transactions` RPC í•¨ìˆ˜ ìƒì„±
- [ ] ê¶Œí•œ í™•ì¸ ë¡œì§ ì¶”ê°€
- [ ] í•„í„°ë§ ë¡œì§ êµ¬í˜„
- [ ] JOIN ì¿¼ë¦¬ ìµœì í™”
- [ ] í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ ì‹¤í–‰

### Phase 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´
- [ ] `WalletService.getPendingCashTransactions()` êµ¬í˜„
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€
- [ ] íƒ€ì… ë³€í™˜ ë¡œì§ êµ¬í˜„

### Phase 3: UI
- [ ] `AdminPointsScreen` ì¬êµ¬ì„±
- [ ] í•„í„° UI êµ¬í˜„
- [ ] ê±°ë˜ ì¹´ë“œ ìœ„ì ¯ êµ¬í˜„
- [ ] ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸ êµ¬í˜„
- [ ] ìŠ¹ì¸ ë‹¤ì´ì–¼ë¡œê·¸ êµ¬í˜„
- [ ] ê±°ì ˆ ë‹¤ì´ì–¼ë¡œê·¸ êµ¬í˜„

### Phase 4: ìƒíƒœ ê´€ë¦¬
- [ ] ìƒíƒœ ë³€ìˆ˜ ì¶”ê°€
- [ ] ìƒˆë¡œê³ ì¹¨ ë¡œì§ êµ¬í˜„
- [ ] Pull-to-refresh ì¶”ê°€

### Phase 5: í…ŒìŠ¤íŠ¸
- [ ] ì‚¬ì—…ì ì…ê¸ˆ ìŠ¹ì¸ í…ŒìŠ¤íŠ¸
- [ ] ì‚¬ì—…ì ì¶œê¸ˆ ìŠ¹ì¸ í…ŒìŠ¤íŠ¸
- [ ] ë¦¬ë·°ì–´ ì…ê¸ˆ ìŠ¹ì¸ í…ŒìŠ¤íŠ¸
- [ ] ë¦¬ë·°ì–´ ì¶œê¸ˆ ìŠ¹ì¸ í…ŒìŠ¤íŠ¸
- [ ] ê±°ì ˆ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í•„í„°ë§ í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

---

## ğŸš€ ìš°ì„ ìˆœìœ„

### High Priority (í•„ìˆ˜)
1. Phase 1: ë°ì´í„°ë² ì´ìŠ¤ RPC í•¨ìˆ˜
2. Phase 2: ì„œë¹„ìŠ¤ ë ˆì´ì–´
3. Phase 3: ê¸°ë³¸ UI (ê±°ë˜ ëª©ë¡, ìŠ¹ì¸/ê±°ì ˆ)

### Medium Priority (ì¤‘ìš”)
4. Phase 3: ìƒì„¸ ë‹¤ì´ì–¼ë¡œê·¸
5. Phase 4: ìƒíƒœ ê´€ë¦¬ ë° ìƒˆë¡œê³ ì¹¨

### Low Priority (ì„ íƒ)
6. Phase 5: ê³ ê¸‰ í•„í„°ë§
7. ìë™ ìƒˆë¡œê³ ì¹¨
8. í†µê³„ ëŒ€ì‹œë³´ë“œ

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

### ë³´ì•ˆ
- ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ í•„ìˆ˜
- RPC í•¨ìˆ˜ì—ì„œ `SECURITY DEFINER` ì‚¬ìš©
- í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê¶Œí•œ í™•ì¸ë„ ì¶”ê°€

### ì„±ëŠ¥
- ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜ í•„ìˆ˜
- ì¸ë±ìŠ¤ í™•ì¸: `cash_transactions.status`, `cash_transactions.created_at`
- JOIN ìµœì í™”

### í™•ì¥ì„±
- ì¶”í›„ ì•Œë¦¼ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥
- ì´ë©”ì¼ ì•Œë¦¼ ì—°ë™ ê°€ëŠ¥
- ìŠ¹ì¸/ê±°ì ˆ ì´ë ¥ ì¡°íšŒ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥

---

## ğŸ”— ê´€ë ¨ íŒŒì¼
- `lib/screens/mypage/admin/admin_points_screen.dart`
- `lib/services/wallet_service.dart`
- `supabase/migrations/20251112105337_drop_point_transfer_logs.sql` (update_cash_transaction_status í•¨ìˆ˜)
- `lib/screens/mypage/common/point_transaction_detail_screen.dart` (ì°¸ê³ ìš©)

